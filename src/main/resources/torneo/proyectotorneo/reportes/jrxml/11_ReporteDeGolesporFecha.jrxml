<!-- Created with Jaspersoft Studio version 7.0.3.final using JasperReports Library version 7.0.3-41034ca841d452f3305ba55b9042260aaa1ab5dd  -->
<jasperReport name="ReportedeGolesporFecha" language="java" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="40c63207-9bf3-4b60-abe8-47cdbbe464c8">
    <property name="com.jaspersoft.studio.data.defaultdataadapter" value="DataAdapter.jrdax"/>
    <property name="com.jaspersoft.studio.data.sql.tables" value=""/>
    <query language="sql"><![CDATA[SELECT
    j.jornada AS fecha,
    COUNT(p.id_partido) AS partidos,
    SUM(r.goles_local + r.goles_visitante) AS goles_totales,
    CASE
        WHEN COUNT(p.id_partido) = 0 THEN 0
        ELSE ROUND(SUM(r.goles_local + r.goles_visitante) / COUNT(p.id_partido), 2)
    END AS promedio_goles
FROM jornada j
LEFT JOIN partido p ON p.id_jornada = j.id_jornada
LEFT JOIN resultado_final r ON r.id_partido = p.id_partido
GROUP BY j.jornada
ORDER BY j.jornada
]]></query>
    <field name="FECHA" class="java.math.BigDecimal">
        <property name="com.jaspersoft.studio.field.name" value="FECHA"/>
        <property name="com.jaspersoft.studio.field.label" value="FECHA"/>
    </field>
    <field name="PARTIDOS" class="java.math.BigDecimal">
        <property name="com.jaspersoft.studio.field.name" value="PARTIDOS"/>
        <property name="com.jaspersoft.studio.field.label" value="PARTIDOS"/>
    </field>
    <field name="GOLES_TOTALES" class="java.math.BigDecimal">
        <property name="com.jaspersoft.studio.field.name" value="GOLES_TOTALES"/>
        <property name="com.jaspersoft.studio.field.label" value="GOLES_TOTALES"/>
    </field>
    <field name="PROMEDIO_GOLES" class="java.math.BigDecimal">
        <property name="com.jaspersoft.studio.field.name" value="PROMEDIO_GOLES"/>
        <property name="com.jaspersoft.studio.field.label" value="PROMEDIO_GOLES"/>
    </field>
    <background splitType="Stretch"/>
    <title height="43" splitType="Stretch">
        <element kind="staticText" uuid="174d0285-8b48-41c6-b36d-774a5d24581a" x="0" y="0" width="550" height="43" fontSize="22.0" hTextAlign="Center" vTextAlign="Middle">
            <text><![CDATA[REPORTE DE GOLES POR FECHA]]></text>
        </element>
    </title>
    <pageHeader height="23" splitType="Stretch"/>
    <columnHeader height="24" splitType="Stretch"/>
    <detail>
        <band height="35" splitType="Stretch"/>
    </detail>
    <columnFooter height="11" splitType="Stretch"/>
    <pageFooter splitType="Stretch"/>
    <summary height="430" splitType="Stretch">
        <element kind="chart" chartType="line" uuid="abca835c-83b7-4d3d-9549-4852408e3a2d" x="20" y="5" width="534" height="420" evaluationTime="Report">
            <dataset kind="category">
                <series>
                    <seriesExpression><![CDATA[$F{GOLES_TOTALES}]]></seriesExpression>
                    <categoryExpression><![CDATA[$F{FECHA}]]></categoryExpression>
                    <valueExpression><![CDATA[$F{GOLES_TOTALES}]]></valueExpression>
                </series>
                <series>
                    <seriesExpression><![CDATA[$F{PROMEDIO_GOLES}]]></seriesExpression>
                    <categoryExpression><![CDATA[$F{FECHA}]]></categoryExpression>
                    <valueExpression><![CDATA[$F{PROMEDIO_GOLES}]]></valueExpression>
                </series>
            </dataset>
            <plot categoryAxisLabelColor="#000000" categoryAxisTickLabelColor="#000000" categoryAxisVerticalTickLabels="false" categoryAxisLineColor="#000000" valueAxisLabelColor="#000000" valueAxisTickLabelColor="#000000" valueAxisLineColor="#000000" showShapes="true" showLines="true"/>
        </element>
    </summary>
</jasperReport>
