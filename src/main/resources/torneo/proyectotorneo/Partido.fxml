<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane prefHeight="800" prefWidth="1200" style="-fx-background-color: #f5f7fa;" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="torneo.proyectotorneo.viewController.PartidoViewController">

    <!-- Header Section -->
    <top>
        <VBox>
            <!-- Title Bar -->
            <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-background-color: white; -fx-padding: 20 30;">
                <VBox spacing="3">
                    <Label style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #1f2937;" text="Partidos">
                        <font>
                            <Font name="System Bold" size="24" />
                        </font>
                    </Label>
                    <Label style="-fx-font-size: 13px; -fx-text-fill: #6b7280;" text="Gestión de partidos del campeonato">
                        <font>
                            <Font size="13" />
                        </font>
                    </Label>
                </VBox>

                <Region HBox.hgrow="ALWAYS" />

                <Button fx:id="btnNuevoPartido" onAction="#handleNuevoPartido" style="-fx-background-color: #2563eb; -fx-text-fill: white; -fx-background-radius: 6; -fx-padding: 10 20; -fx-cursor: hand; -fx-font-weight: bold;" text="+ Nuevo Partido">
                    <font>
                        <Font size="13" />
                    </font>
                </Button>
            </HBox>

            <!-- Filters Section -->
            <VBox spacing="15" style="-fx-background-color: white; -fx-padding: 20 30; -fx-border-color: #e5e7eb; -fx-border-width: 1 0 1 0;">

                <!-- Filter Title and Clear Button -->
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #374151;" text="Filtros Avanzados">
                        <font>
                            <Font name="System Bold" size="14" />
                        </font>
                    </Label>
                    <Region HBox.hgrow="ALWAYS" />
                    <Label fx:id="limpiarFiltrosLink" onMouseClicked="#handleLimpiarFiltros" style="-fx-text-fill: #2563eb; -fx-cursor: hand; -fx-font-size: 13px; -fx-underline: true;" text="Limpiar Filtros" />
                </HBox>

                <!-- Filter Dropdowns -->
                <HBox spacing="15">
                    <!-- Equipo -->
                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label style="-fx-font-size: 12px; -fx-text-fill: #6b7280; -fx-font-weight: bold;" text="Equipo">
                            <font>
                                <Font size="12" />
                            </font>
                        </Label>
                        <ComboBox fx:id="equipoComboBox" maxWidth="Infinity" onAction="#handleFiltroChanged" promptText="Todos los equipos" style="-fx-background-color: white; -fx-border-color: #d1d5db; -fx-border-radius: 6; -fx-background-radius: 6; -fx-padding: 8 12;" />
                    </VBox>

                    <!-- Posición (Tipo) -->
                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label style="-fx-font-size: 12px; -fx-text-fill: #6b7280; -fx-font-weight: bold;" text="Posición">
                            <font>
                                <Font size="12" />
                            </font>
                        </Label>
                        <ComboBox fx:id="tipoEquipoComboBox" maxWidth="Infinity" onAction="#handleFiltroChanged" promptText="Local o Visitante" style="-fx-background-color: white; -fx-border-color: #d1d5db; -fx-border-radius: 6; -fx-background-radius: 6; -fx-padding: 8 12;" />
                    </VBox>

                    <!-- Jornada -->
                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label style="-fx-font-size: 12px; -fx-text-fill: #6b7280; -fx-font-weight: bold;" text="Jornada">
                            <font>
                                <Font size="12" />
                            </font>
                        </Label>
                        <ComboBox fx:id="jornadaComboBox" maxWidth="Infinity" onAction="#handleFiltroChanged" promptText="Todas las jornadas" style="-fx-background-color: white; -fx-border-color: #d1d5db; -fx-border-radius: 6; -fx-background-radius: 6; -fx-padding: 8 12;" />
                    </VBox>

                    <!-- Estadio -->
                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label style="-fx-font-size: 12px; -fx-text-fill: #6b7280; -fx-font-weight: bold;" text="Estadio">
                            <font>
                                <Font size="12" />
                            </font>
                        </Label>
                        <ComboBox fx:id="estadioComboBox" maxWidth="Infinity" onAction="#handleFiltroChanged" promptText="Todos los estadios" style="-fx-background-color: white; -fx-border-color: #d1d5db; -fx-border-radius: 6; -fx-background-radius: 6; -fx-padding: 8 12;" />
                    </VBox>
                </HBox>

                <!-- Status Tabs -->
                <HBox spacing="0" style="-fx-background-color: #f9fafb; -fx-padding: 4; -fx-background-radius: 8; -fx-border-color: #e5e7eb; -fx-border-radius: 8; -fx-border-width: 1;">
                    <ToggleButton fx:id="todosToggle" onAction="#handleEstadoChanged" style="-fx-background-color: transparent; -fx-text-fill: #374151; -fx-padding: 8 20; -fx-background-radius: 6; -fx-cursor: hand; -fx-border-width: 0;" text="Todos (4)" HBox.hgrow="ALWAYS" />
                    <ToggleButton fx:id="programadosToggle" onAction="#handleEstadoChanged" style="-fx-background-color: transparent; -fx-text-fill: #374151; -fx-padding: 8 20; -fx-background-radius: 6; -fx-cursor: hand; -fx-border-width: 0;" text="Programados (1)" HBox.hgrow="ALWAYS" />
                    <ToggleButton fx:id="enCursoToggle" onAction="#handleEstadoChanged" style="-fx-background-color: transparent; -fx-text-fill: #374151; -fx-padding: 8 20; -fx-background-radius: 6; -fx-cursor: hand; -fx-border-width: 0;" text="En Curso (0)" HBox.hgrow="ALWAYS" />
                    <ToggleButton fx:id="finalizadosToggle" onAction="#handleEstadoChanged" style="-fx-background-color: transparent; -fx-text-fill: #374151; -fx-padding: 8 20; -fx-background-radius: 6; -fx-cursor: hand; -fx-border-width: 0;" text="Finalizados (3)" HBox.hgrow="ALWAYS" />
                </HBox>

                <!-- Active Filters (hidden by default) -->
                <FlowPane fx:id="activeFiltrosPane" hgap="8" managed="false" vgap="8" visible="false" />
            </VBox>
        </VBox>
    </top>

    <!-- Main Content - Cards -->
    <center>
        <VBox spacing="0" style="-fx-background-color: #f5f7fa;">
            <padding>
                <Insets bottom="20" left="30" right="30" top="20" />
            </padding>

            <!-- Results Counter (optional, can be removed if not needed) -->
            <Label fx:id="resultadosLabel" managed="false" text="Mostrando 0 partido(s)" visible="false" />

            <!-- Scrollable Cards Container -->
            <ScrollPane fx:id="partidosScrollPane" fitToWidth="true" prefHeight="471.0" prefWidth="1140.0" style="-fx-background-color: transparent; -fx-border-width: 0;">
                <VBox fx:id="partidosContainer" spacing="12" style="-fx-background-color: transparent;">
                    <!-- Los cards de partidos se cargan aquí dinámicamente -->
                </VBox>
            </ScrollPane>
        </VBox>
    </center>

</BorderPane>
